(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{12:function(e,t,a){"use strict";var n=a(2);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var o={props:{items:{type:Array,require:!0},dataToList:{type:Array,require:!0},dataTitles:{type:Array},newItemBtnLable:{type:String},maxDialogsWidth:{type:String,default:"500px"},itemDeleteable:{type:Boolean},itemEditable:{type:Boolean},itemHasDetails:{type:Boolean},deleteConfirmMsg:{type:String,default:"Are you sure you want to delete?"},searchable:{type:Boolean}},created:function(){var e=this;this.dataToList&&(this.headers=this.dataToList.map((function(t,a){var n={text:e.dataTitles&&e.dataTitles[a]?e.dataTitles[a]:t,value:t};return 0==a&&(n=i({},n,{align:"start"})),n})),this.itemManagable&&this.headers.push({text:"Actions",value:"actions",align:"end",sortable:!1}))},data:function(){return{headers:[],detailsDialog:!1,editDialog:!1,newItemDialog:!1,selectedItem:null,currentDialog:"newItemDialog",search:""}},methods:{editItem:function(e){this.selectedItem=i({},e),this.editDialog=!0},deleteItem:function(e){confirm(this.deleteConfirmMsg)&&(this.selectedItem=i({},e),this.$emit("deleteItem",e))},showItem:function(e){this.selectedItem=i({},e),this.detailsDialog=!0},closeNewItemDialog:function(){this.newItemDialog=!1},closeEditDialog:function(){this.editDialog=!1},closeDetailsDialog:function(){this.detailsDialog=!1}},components:{},computed:i({},Object(n.c)("global",["isMobile"]),{itemManagable:function(){return this.itemDeleteable||this.itemEditable||this.itemHasDetails}})},l=(a(53),a(1)),c=Object(l.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:" m-0 p-0"},[a("v-row",{attrs:{justify:"center",dense:""}},[e.searchable?a("v-col",{staticClass:"m-0 p-0",attrs:{cols:"12",sm:"8",md:"6"}},[a("v-toolbar-items",[a("v-text-field",{staticClass:"m-0 p-0",attrs:{type:"text",label:"Search",dense:"","append-icon":"mdi-magnify",outlined:"",height:"20px"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1):e._e(),e._v(" "),a("v-col",{staticClass:"mt-0 p-0",attrs:{cols:"12"}},[a("v-data-table",{staticClass:"elevation-2",attrs:{search:e.search,headers:e.headers,items:e.items},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-spacer"),e._v(" "),e.itemHasDetails?a("v-dialog",{attrs:{"max-width":e.maxDialogsWidth},model:{value:e.detailsDialog,callback:function(t){e.detailsDialog=t},expression:"detailsDialog"}},[a("v-card",{staticClass:"pb-2"},[a("v-icon",{staticClass:"close-mark",on:{click:function(t){return e.closeDetailsDialog()}}},[e._v("mdi-close")]),e._v(" "),e._t("detailsDialog",null,{item:e.selectedItem,close:e.closeDetailsDialog})],2)],1):e._e(),e._v(" "),e.itemEditable?a("v-dialog",{attrs:{"max-width":e.maxDialogsWidth},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[a("v-card",{staticClass:"pb-2"},[a("v-icon",{staticClass:"close-mark",on:{click:function(t){return e.closeEditDialog()}}},[e._v("mdi-close")]),e._v(" "),e._t("editDialog",null,{item:e.selectedItem,close:e.closeEditDialog})],2)],1):e._e(),e._v(" "),e.newItemBtnLable?a("v-dialog",{attrs:{"max-width":e.maxDialogsWidth},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({attrs:{color:"primary"}},n),[e.isMobile?[a("v-icon",[e._v("mdi-plus")])]:[e._v(e._s(e.newItemBtnLable)+"\n                                    ")]],2)]}}],null,!1,1350980592),model:{value:e.newItemDialog,callback:function(t){e.newItemDialog=t},expression:"newItemDialog"}},[e._v(" "),a("v-card",{staticClass:"pb-2"},[a("v-icon",{staticClass:"close-mark",on:{click:function(t){return e.closeNewItemDialog()}}},[e._v("mdi-close")]),e._v(" "),e._t("newItemDialog",null,{close:e.closeNewItemDialog})],2)],1):e._e()],1)]},proxy:!0},e.itemManagable?{key:"item.actions",fn:function(t){var n=t.item;return[e.itemHasDetails?a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.showItem(n)}}},[e._v("\n                        mdi-eye\n                    ")]):e._e(),e._v(" "),e.itemEditable?a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(n)}}},[e._v("\n                        mdi-pencil\n                    ")]):e._e(),e._v(" "),e.itemDeleteable?a("v-icon",{attrs:{small:"",color:"red"},on:{click:function(t){return e.deleteItem(n)}}},[e._v("\n                        mdi-delete\n                    ")]):e._e()]}}:null,{key:"no-data",fn:function(){return[a("h3",[e._v("No Data Found!")])]},proxy:!0}],null,!0)})],1)],1)],1)}),[],!1,null,"86ab815c",null);t.a=c.exports},18:function(e,t,a){var n=a(54);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(15)(n,r);n.locals&&(e.exports=n.locals)},35:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),s=a.n(i),o=a(12),l=a(2);function c(e,t,a,n,r,i,s){try{var o=e[i](s),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(n,r)}function u(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var i=e.apply(t,a);function s(e){c(i,n,r,s,o,"next",e)}function o(e){c(i,n,r,s,o,"throw",e)}s(void 0)}))}}function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){p(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var v={requiredData:["departments","supervisors"],created:function(){},data:function(){return{newDepartment:{}}},components:{DataList:o.a},methods:d({},Object(l.b)("data",["request","addNewItemTo","deleteItemBy","updateItemBy"]),{createNewDepartment:function(e){var t=this;return u(r.a.mark((function a(){var n,i;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e(),a.next=3,new s.a({title:t.newDepartment.title,dept_manager_id:t.getBy("id","supervisors","f_name",t.newDepartment.super)}).post("/api/departments");case 3:n=a.sent,i=n.data,t.newDepartment={},t.addNewItemTo({what:"departments",item:i});case 7:case"end":return a.stop()}}),a)})))()},updateDepartment:function(e,t){var a=this;return u(r.a.mark((function n(){var i,o;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t(),n.next=3,new s.a({title:e.title,dept_manager_id:a.getBy("id","supervisors","f_name",e.manager)}).put("/api/departments/".concat(e.id));case 3:i=n.sent,o=i.data,a.updateItemBy({from:"departments",by:"id",value:e.id,item:o});case 6:case"end":return n.stop()}}),n)})))()},deleteDepartment:function(e){var t=this;return u(r.a.mark((function a(){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,axios.delete("/api/departments/".concat(e.id));case 2:return a.next=4,t.request({what:"registableProjects",force:!0});case 4:t.deleteItemBy({from:"departments",by:"id",value:e.id});case 5:case"end":return a.stop()}}),a)})))()}}),computed:d({},Object(l.c)("data",["getAll","getListOf","getBy"]),{items:function(){var e=this.getBy;return(0,this.getAll)("departments").map((function(t){return d({},t,{manager:t.dept_manager_id?e("f_name","supervisors","id",t.dept_manager_id):"None"})}))}})},f=a(1),g=Object(f.a)(v,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",[a("data-list",{attrs:{items:e.items,dataTitles:["Title","Manager"],dataToList:["title","manager"],itemDeleteable:"",itemEditable:"",newItemBtnLable:"Create New Department",maxDialogsWidth:"800px",deleteConfirmMsg:"Are you sure you want to delete this Departmente? any thing is depending on this will be delete too!!!!"},on:{deleteItem:e.deleteDepartment},scopedSlots:e._u([{key:"newItemDialog",fn:function(t){var n=t.close;return[a("v-card-title",{staticClass:"primary text-white"},[e._v("\n                        Create New Department\n                    ")]),e._v(" "),a("v-card-text",[a("v-form",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-text-field",{attrs:{label:"Title",type:"text"},model:{value:e.newDepartment.title,callback:function(t){e.$set(e.newDepartment,"title",t)},expression:"newDepartment.title"}})],1),e._v(" "),a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-select",{attrs:{items:e.getListOf("f_name","supervisors"),label:"Manager"},model:{value:e.newDepartment.super,callback:function(t){e.$set(e.newDepartment,"super",t)},expression:"newDepartment.super"}})],1)],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"blue",text:""},on:{click:function(t){return e.createNewDepartment(n)}}},[e._v("Save")])],1)]}},{key:"editDialog",fn:function(t){var n=t.item,r=t.close;return[n?[a("v-card-title",{staticClass:"primary text-white"},[e._v("\n                            Edite Department\n                        ")]),e._v(" "),a("v-card-text",[a("v-form",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-text-field",{attrs:{label:"Title",type:"text"},model:{value:n.title,callback:function(t){e.$set(n,"title",t)},expression:"item.title"}})],1),e._v(" "),a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-select",{attrs:{items:e.getListOf("f_name","supervisors"),label:"Manager"},model:{value:n.manager,callback:function(t){e.$set(n,"manager",t)},expression:"item.manager"}})],1)],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"blue",text:""},on:{click:function(t){return e.updateDepartment(n,r)}}},[e._v("Save")])],1)]:e._e()]}}])})],1)],1)],1)}),[],!1,null,"2f793dac",null);t.default=g.exports},53:function(e,t,a){"use strict";var n=a(18);a.n(n).a},54:function(e,t,a){(e.exports=a(14)(!1)).push([e.i,".close-mark[data-v-86ab815c] {\n  position: absolute;\n  right: 10px;\n  top: 10px;\n  color: wheat;\n}",""])}}]);